<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>App respponse alternative</title>

    </head>

    <body>

        <h1>App</h1>

        <div id="counter"></div>

        <script>

            let eventSource = new EventSource("/listen")

            eventSource.addEventListener("message", function(e) {
            
              console.log(e.data)  
            
            }, false)

            eventSource.addEventListener("online", function(e) {
            
                data = JSON.parse(e.data)

                document.querySelector("#counter").innerText = data.counter
            
                document.querySelector("body").style.backgroundColor = data.color

            }, true)

        </script>

    </body>

</html>